databases:
  - name: agri-advisory-db
    databaseName: agri_advisory
    user: agri_user
    plan: free

services:
  - type: web
    name: agri-advisory-web
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate"
    startCommand: "gunicorn core.wsgi:application"
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: agri-advisory-db
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
      - key: PYTHON_VERSION
        value: "3.10.0"
      # Add default fallbacks for required APIs below:
      - key: DATA_GOV_IN_API_KEY
        value: "579b464db66ec23bdd000001859bf9ec42d44fcbae244f0ceacc52db" # Public fallback key
      - key: SENTRY_DSN
        value: "" # Fill this in your dashboard if needed
      - key: GEMINI_API_KEY
        value: "YOUR_GEMINI_API_KEY_HERE" # Update this in the dashboard
